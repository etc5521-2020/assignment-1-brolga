---
title: "ETC5521 Assignment 1"
subtitle: "Your title"
team: brolga
author:
  - Dilinie Seimon
  - Diyao Chen
date: "`r Sys.Date()`"
output: 
  html_document
---

```{r setup, echo = FALSE, warning = FALSE, message = FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library("tidyverse")
library("readr")
library("kableExtra")
```

[This assignment is for ETC5521 Assignment 1 by Team `r rmarkdown::metadata$team` comprising of `r knitr::combine_words(rmarkdown::metadata$author)`.]{style="color:#006DAE;"}

```{r retreiving-and-saving-data-files, eval=FALSE}
write_csv(readr::read_tsv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/critic.tsv'), "Data/critics.csv")
write_csv(readr::read_tsv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/user_reviews.tsv'), "Data/user-reviews.csv") 
write_csv(readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/items.csv'), "Data/items.csv")
write_csv(readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-05-05/villagers.csv'), "Data/villagers.csv")
```

```{r reading-in-data}
critics <- read_csv("Data/critics.csv")
user_reviews <- read_csv("Data/user-reviews.csv")
items <- read_csv("Data/items.csv")
villagers <- read_csv("Data/villagers.csv")
```


# Introduction and motivation

[`r knitr::include_graphics("Images/animal-crossing-new-horizons.jpg")`]{style="align:right;"}

Animal Crossing: New Horizons is a life simulation video game developed and published by Nintendo for the Nintendo Switch. It was released worldwide on the 20th of March 2020. Since it's inception the game has had an astounding world-side reception With over 22 million copies of the game being sold worlwide in just 5 months.

In the animal crossing world a player takes the role of a customized human character who moves to a deserted island and carries out various activities such as gathering and crafting items, fishing and bug hunting in a village inhabited by various species of animals. Each of these animals called villagers in the animal crossing world, have their own name, gender, birthday, personality, favourite song and their own catchprhase. The items used in performing different tasks in the animal crossing belong to different categories and are also priced at different buying and selling values.

Although it has been 5 only months since the game was released worldwide, it has been gaining alot of attention from both players and critics. Even non-players may find the concept of this game well designed and interesting.

THe motivation for choosing Animal Crossing in the analysis is to attempt to understand the reason for the immense popularity of the game using user and critic reviews and features within the game (such as the villagers and the items).

Therefore, the following is an analysis of the villagers and items used in the Animal Crossing world and the views of the players and critics about the game.


# Data description

The dataset used for this analysis was retreived from [TidyTuesday](https://github.com/rfordatascience/tidytuesday); a project aimed at allowing individuals to practice their data wrangling and visualization skills through the use of real-world data sets.

The retreived dataset consisted of four sub-datasets; 'villagers' and 'items' datasets containing data about in-game characters and items, and 'user reviews' and 'critic reviews' datasets contatining data about user and critics reviews on the game.

The 'villagers' and 'items' datasets have been originally retreived from [VillagerDB](https://github.com/jefflomacy/villagerdb), which is a project aimed at making data about Animal Crossing available and easily accessible, while the user and critic reviews have been originally retreived by scraping the [Metacritic](https://www.metacritic.com/game/switch/animal-crossing-new-horizons/critic-reviews) website.

### Data dictionary

```{r}
data_dict <- function(df, desc = c()){
  return(data.frame(
    "Variable" = names(df),
    "Description" = desc, 
    check.names = FALSE, row.names = NULL
  ) %>%
    kable() %>%
    kable_styling(bootstrap_options = c("striped")))
}
```
**Villagers**

The 'Villagers' dataset consists of data related to the characters in the Animal Crossing game world. The following are the variables in the villagers dataset and their descriptions.

```{r}
data_dict(villagers, c("Numeric identifier of villager", "Short text identifier of villager", "Name of villager", "Gender of villager", "Species of villager", "Birthday of villager", "Personality of Villager", "Song associated with villager", "Catchphrase of the villager", "Full text identifier of villager", "Link to image of villager"))
```

**Items**

The 'Items' dataset consists of data related to the items in the Animal Crossing game world. The following are the variables in the items dataset and their descriptions.

```{r}
data_dict(items, c("Numeric identifier of item", "Character identifier of villager", "Name of item", "Category of item", "Orderable from catalog", "Selling value", "Selling currency", "Buying value", "Buying currency", "Way/place to acquire item", "Is item customizable", "Recipe number", "Recipe ID", "Game ID", "Full Character ID", "Link to image of item"))
```

**User Reviews**

The 'User Reviews' dataset consists of the scores and reviews made by users from `r min(user_reviews$date)` to `r max(user_reviews$date)`.

```{r}
data_dict(user_reviews, c("Raw score(0-10) given, 0-lowest and 10-highest","User name of the reviewer","Raw text of the review","Date the review was published"))
```

**Critic Reviews**

The 'Critic Reviews' dataset consists of the scores and reviews made by critics about the game from `r min(critics$date)` to `r max(critics$date)`.

```{r}
data_dict(critics, c("Raw score(0-100) given, 0-lowest and 100-highest","The source of the reviewer","Raw text of the review","Date the review was published"))
```

# Methodology

# Analysis and findings

[FILL] Should include at least one plot or numerical summary for each of your questions, that helps the reader arrive at an answer. You should also write paragraphs describing the methods, summaries and findings. 

# Section:analysis game mode
Anmials crossing as a hot shell games, the ways of paly the game is unique.Now, we will do some research of the unique villagers system.

NPC,which is non-player character.It is an essential part of every game, which can guide the player how to play the game better.but,in anmials crossing,NPC become villagers,They will not only teach you to play games, but also accompany you in your live in the game world. 
```{r analysis species}
dat <- villagers%>%
  select(species)%>%
  group_by(species)%>%
  mutate(case=n())%>%
  mutate(prop = round(n()/381*100))%>%
  arrange(-case)%>%
  unique()


 knitr::kable(head(dat,10),
  caption = "Table. Ranking of villagers species") %>% 
  kable_styling(latex_options = c("striped", "hold_position"))

```



```{r graph of species}
Graph<- dat %>%
  ggplot(aes(x =reorder(species,-prop), y = prop, fill = species))+
  geom_bar(stat = "identity", show.legend = FALSE)+
  ggtitle("Analysis the different species of villagers")+
  theme(axis.text.x=element_text(angle = 90, hjust = 1)) +
  labs(x = "species" , y = "prop")+
   geom_text(aes(label=prop),position = position_stack(vjust=1.1))
Graph
```









```{r analysis personality}
dat <- villagers%>%
  select(personality)%>%
  group_by(personality)%>%
  mutate(case=n())%>%
  mutate(prop = round(n()/381*100))%>%
  arrange(-case)%>%
  unique()

print(dat)

```






# References
